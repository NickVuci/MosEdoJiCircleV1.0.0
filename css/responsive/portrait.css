@media (max-width: 767px) {
    #main-wrapper {
        /* flex-direction: column-reverse; -- Now default in grid.css */
        min-height: 0;
        height: 100vh;
    }
    
    /* Sidebar styles now default in sidebar.css - only overrides needed here */
    
    .module,
    .control-module {
        min-width: 200px;
        max-width: 250px;
        width: 200px;
        margin: 0 var(--space-xs);
        flex-shrink: 0;
        scroll-snap-align: start;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    #main-content {
        flex: 1;
        /* height: 67vh; -- Now default in main-content.css */
    }

    #visualization {
        height: 100%;
    }

    /* Add a scroll indicator for mobile mode */
    #sidebar::after {
        content: "";
        position: absolute;
        bottom: 0;
        right: 0;
        height: 100%;
        width: 20px;
        background: linear-gradient(to right, transparent, var(--control-background) 80%);
        pointer-events: none;
        opacity: 0.8;
    }

    /* Make the last module have proper margin */
    #sidebar .module:last-child,
    #sidebar .control-module:last-child {
        margin-right: var(--space-md);
    }
}
